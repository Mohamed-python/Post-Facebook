<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Photo Post</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.min.js"></script>
    <script src="https://unpkg.com/imagesloaded@4.1.4/imagesloaded.pkgd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
        }

        .post-content {
            font-weight: weight;
           
        }

        .container {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            width: 500px;
            padding: 20px;
            box-sizing: border-box;
            margin-bottom: 20px;
        }
        .header {
            background-color: #007bff;
            color: #fff;
            text-align: center;
            padding: 10px;
            border-radius: 8px 8px 0 0;
        }
        .section {
            border: 1px solid #007bff;
            border-radius: 8px;
            width: 60%;
            padding: 10px;
            text-align: center;
            font-family: "Tahoma";
            font-size: 15px;
        }
        input, textarea {
            width: calc(100% - 20px);
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
        }
        .upload-button {
            background-color: #28a745;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 10px;
            width: 100%;
            cursor: pointer;
            margin-bottom: 5px;
            font-family: "Tahoma";
            font-size: 15px;
        }
        .upload-button:hover {
            background-color: #218838;
        }
        .footer {
            margin-top: 20px;
            text-align: center;
        }
        .post {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            width: 500px;
            padding: 20px;
            margin: 0 auto;
            margin-bottom: 20px;
            position: relative;
        }
        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        .post-header img {
            border-radius: 50%;
            width: 50px;
            height: 50px;
            margin-right: 10px;
        }
        .post-header .user-info {
            display: flex;
            flex-direction: column;
        }
        .post-header .user-info .name {
            font-weight: bold;
        }
        .post-header .user-info .time {
            color: #616770;
            font-size: 12px;


        }

        .total-interactions {
            margin: auto;
            margin-left: 5px;
        }
        .post-content {
        margin-top: 10px;
        font-size: 20px;
        overflow-wrap: break-word; 
        font-family: "Rubik", sans-serif;
        font-optical-sizing: auto;
        font-weight: weight;
        font-style: normal;
        /* height: 60px; */
        padding-bottom: 4px;
        display: flex;

    }
        .post-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            border-top: 1px solid #ddd;
            padding-top: 10px;
        }
        .post-footer .actions {
            display: flex;
        }
        .post-footer .actions span {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        .post-footer .counters {
            display: flex;
            gap: 15px;
            font-size: 12px;
            color: #616770;
        }
        .close-button {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-weight: bolder;
        }
        .hidden {
            display: none;
        }
        .avatar-section {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .avatar-section input[type="file"] {
            flex-grow: 1;
        }
        .verification-icon img{
            width: 20px; /* تعديل عرض الأيقونة حسب الحاجة */
            height: 20px; /* تعديل ارتفاع الأيقونة حسب الحاجة */
            margin-left: 5px; /* تعديل المسافة بين الأيقونة واسم المستخدم */
            vertical-align: middle; /* لمحاذاة الأيقونة بشكل مناسب بجانب النص */
            margin-bottom: 14px;
        }
    </style>
</head>
<body>

<div class="container">
    
    <div class="avatar-section">
        <input type="file" id="avatar-upload" class="upload-button" width="200px">
        <div class="section">صورة البروفايل</div>
    </div>

    
    <input type="text" id="name" placeholder="Enter Name">


    <textarea id="post-text" placeholder="Enter Post Text"></textarea>
    

    <div class="avatar-section">
    <input type="file" id="image-upload" class="upload-button">
    <div class="section">إضافة صورة للمنشور</div>
</div>

    <div id="interaction-fields" class="hidden">
        <input type="number" id="like-count" placeholder="Number of Likes" value="7" min="1">
        <input type="number" id="comment-count" placeholder="Number of Comments" value="1" min="0">
        <input type="number" id="share-count" placeholder="Number of Shares" value="1" min="0">
    </div>
    <button id="toggle-actions" class="upload-button">إضافة أعداد  التفاعل</button>
</br>
    <button id="save-post" class="upload-button">حفظ البوست</button>
</div>

<div class="post" id="post">
    <div class="close-button">&hellip;</div>
    <div class="post-header">
        <img id="display-avatar" src="123.png" alt="Avatar">
        <div class="user-info">
            <span class="name" id="display-name">Mohamed Gamal</span>
            
            <span class="time" id="display-username">Just now</span>
        </div>
        <div class="verification-icon">
            <img src="verification.png" alt="Verified Icon">
        </div>
    </div>
  
   
    
    
    <div class="post-content" id="display-text">
        At Power Family, we build a strong community and support each other at every stage. We believe in dedication and sacrifice, and always strive for growth and development.
    </div>
    <img id="display-image"  src="" alt="" style="display: none;" width="400">
    <div class="post-footer">
        <div class="actions" id="action-icons" class="hidden">
            <span><img src="like.jpg" alt="Like" width="21"></span>
            <span><img src="lave.jpg" alt="Comment" width="21"></span>
            <span><img src="care.jpg" alt="Share" width="21"></span>
            <div class="total-interactions">
                <span id="total-interactions-value">9</span>
            </div>
        </div>
        <div class="counters">
            <span id="like-counter">7 Likes</span>
            <span id="comment-counter">1 Comment</span>
            <span id="share-counter">1 Share</span>
        </div>
    </div>
    
</div>




<script>

document.getElementById('save-post').addEventListener('click', function() {
    document.getElementById('action-icons').classList.remove('hidden');
    
    html2canvas(document.querySelector('.post'), {
        useCORS: true,
        scrollY: -window.scrollY,
        windowWidth: window.innerWidth,
        onrendered: function(canvas) {
            var imgData = canvas.toDataURL('image/png');
            var link = document.createElement('a');
            link.href = imgData;
            link.download = 'post.png';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            document.getElementById('action-icons').classList.add('hidden');
        }
    });
});








document.getElementById('name').addEventListener('input', function() {
    document.getElementById('display-name').innerText = this.value || 'Username';
});

document.getElementById('post-text').addEventListener('input', function() {
    var postContent = document.getElementById('display-text');
    var postText = this.value || 'Post text here.';
    
    var isArabic = /[\u0600-\u06FF]/.test(postText); // Check for Arabic Unicode range
    
    postContent.innerText = postText;
    postContent.style.direction = isArabic ? 'rtl' : 'ltr';
});

document.getElementById('image-upload').addEventListener('change', function(event) {
    const reader = new FileReader();
    reader.onload = function() {
        const image = document.getElementById('display-image');
        image.src = reader.result;
        image.style.display = 'block';
    };
    if (event.target.files[0]) {
        reader.readAsDataURL(event.target.files[0]);
    }
});

document.getElementById('avatar-upload').addEventListener('change', function(event) {
    const reader = new FileReader();
    reader.onload = function() {
        const avatar = document.getElementById('display-avatar');
        avatar.src = reader.result;
    };
    if (event.target.files[0]) {
        reader.readAsDataURL(event.target.files[0]);
    }
});



document.getElementById('toggle-actions').addEventListener('click', function() {
    const interactionFields = document.getElementById('interaction-fields');
    const actionIcons = document.getElementById('action-icons');
    const totalInteractions = document.getElementById('total-interactions-value'); 
    if (interactionFields.classList.contains('hidden')) {
        interactionFields.classList.remove('hidden');
        actionIcons.classList.remove('hidden');
        totalInteractions.innerText = calculateTotalInteractions(); 
    } else {
        interactionFields.classList.add('hidden');
        actionIcons.classList.add('hidden');
        // totalInteractions.innerText = ""; 
    }
});

function calculateTotalInteractions() {
    const likeCount = parseInt(document.getElementById('like-count').value) || 0;
    const commentCount = parseInt(document.getElementById('comment-count').value) || 0;
    const shareCount = parseInt(document.getElementById('share-count').value) || 0;
    const totalInteractions = likeCount + commentCount + shareCount;

    let formattedTotal = totalInteractions.toString();
    if (totalInteractions >= 1000 && totalInteractions < 1000000) {
        formattedTotal = (totalInteractions / 1000).toFixed(1) + 'k';
    } else if (totalInteractions >= 1000000) {
        formattedTotal = (totalInteractions / 1000000).toFixed(1) + 'M';
    }

    return formattedTotal;
};
document.getElementById('like-count').addEventListener('input', function() {
    updateTotalInteractions();
});

document.getElementById('comment-count').addEventListener('input', function() {
    updateTotalInteractions();
});

document.getElementById('share-count').addEventListener('input', function() {
    updateTotalInteractions();
});


function updateTotalInteractions() {
    const likeCount = parseInt(document.getElementById('like-count').value) || 0;
    const commentCount = parseInt(document.getElementById('comment-count').value) || 0;
    const shareCount = parseInt(document.getElementById('share-count').value) || 0;
    const totalInteractions = likeCount + commentCount + shareCount;

    let formattedTotal = totalInteractions.toString();
    if (totalInteractions >= 1000 && totalInteractions < 1000000) {
        formattedTotal = (totalInteractions / 1000).toFixed(1) + 'k';
    } else if (totalInteractions >= 1000000) {
        formattedTotal = (totalInteractions / 1000000).toFixed(1) + 'M';
    }

    const totalInteractionsElement = document.getElementById('total-interactions-value');
    totalInteractionsElement.innerText = formattedTotal;

    document.getElementById('like-counter').innerText = `${likeCount} Likes`;
    document.getElementById('comment-counter').innerText = `${commentCount} Comments`;
    document.getElementById('share-counter').innerText = `${shareCount} Shares`;
}



</script>
<script src="https://unpkg.com/imagesloaded@4.1.4/imagesloaded.pkgd.min.js"></script>

</body>
</html>
